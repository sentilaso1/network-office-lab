! ================== SWITCH 3650 ==================
enable
configure terminal
hostname SW1
spanning-tree mode pvst
vlan 10
 name HR
vlan 20
 name IT
vlan 30
 name Guest
interface range GigabitEthernet1/0/1 - 2
 switchport mode access
 switchport access vlan 10
 description HR-PCs
interface range GigabitEthernet1/0/3 - 4
 switchport mode access
 switchport access vlan 20
 description IT-PCs
interface range GigabitEthernet1/0/5 - 6
 switchport mode access
 switchport access vlan 30
 description GUEST-PCs
interface GigabitEthernet1/0/7
 switchport mode access
 switchport access vlan 10
 description SERVER-HR
interface GigabitEthernet1/0/24
 switchport mode trunk
 description TRUNK-TO-ROUTER
exit
write memory

! ================== ROUTER 2901 ==================
enable
configure terminal
hostname R1
ip routing
interface GigabitEthernet0/0.10
 encapsulation dot1Q 10
 ip address 192.168.10.1 255.255.255.0
interface GigabitEthernet0/0.20
 encapsulation dot1Q 20
 ip address 192.168.20.1 255.255.255.0
interface GigabitEthernet0/0.30
 encapsulation dot1Q 30
 ip address 192.168.30.1 255.255.255.0
interface GigabitEthernet0/0
 no shutdown
ip dhcp pool VLAN10
 network 192.168.10.0 255.255.255.0
 default-router 192.168.10.1
 dns-server 192.168.10.254
ip dhcp pool VLAN20
 network 192.168.20.0 255.255.255.0
 default-router 192.168.20.1
 dns-server 192.168.20.254
ip dhcp pool VLAN30
 network 192.168.30.0 255.255.255.0
 default-router 192.168.30.1
 dns-server 192.168.30.254
ip dhcp excluded-address 192.168.10.1 192.168.10.10
ip dhcp excluded-address 192.168.20.1 192.168.20.10
ip dhcp excluded-address 192.168.30.1 192.168.30.10
access-list 100 deny ip 192.168.30.0 0.0.0.255 192.168.10.0 0.0.0.255
access-list 100 permit ip any any
interface GigabitEthernet0/0.30
 ip access-group 100 in
end
write memory

! ================== SERVER (CẤU HÌNH TRONG GIAO DIỆN GRAPHIC) ==================
- IP tĩnh: 192.168.10.254 /24
- Default Gateway: 192.168.10.1
- Bật dịch vụ DNS
- Thêm bản ghi:
  + Tên miền: intranet.local → 192.168.10.254
- Bật dịch vụ HTTP nếu intranet.local là trang web
